---
import type { InferGetStaticParamsType, GetStaticPaths } from 'astro';
import getEntry from '@lib/craft-cms/get-entry';
import type { Entry } from '@page-configs/example-structure';
import { query, uriPrefix } from '@page-configs/example-structure';
import staticPaths from '@data/example-structure/static-paths.json';

type Params = InferGetStaticParamsType<typeof getStaticPaths>;

const { slug } = Astro.params as Params;

const entry = await getEntry<Entry>({ query, uriPrefix, slug });

if (!entry) {
  return new Response(null, { status: 404 });
}

export const getStaticPaths = (async () => {
  return staticPaths;
}) satisfies GetStaticPaths;
---

{entry.title}
