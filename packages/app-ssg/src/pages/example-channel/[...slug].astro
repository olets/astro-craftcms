---
import type { InferGetStaticParamsType, GetStaticPaths } from 'astro';
import getEntry from '@lib/craft-cms/get-entry';
import type { Entry } from '@page-configs/example-channel';
import { query, uriPrefix } from '@page-configs/example-channel';
import staticPaths from '@cache/example-channel/static-paths.json';

type Params = InferGetStaticParamsType<typeof getStaticPaths>;

const { slug } = Astro.params as Params;

const entry = await getEntry<Entry>({ query, uriPrefix, slug });

if (entry === undefined) {
  Astro.response.status = 404;
  return;
}

export const getStaticPaths = (async () => {
  return staticPaths;
}) satisfies GetStaticPaths;
---

{entry.title}
