---
import path from "node:path";
import fetchContent from "@lib/craft-cms/fetch-content";

interface Entry {
  title: string;
}

const { slug = "" } = Astro.params;

const entries = await fetchContent<Entry>(`{
  entries (section: "exampleChannel", uri: "${path.join("example-channel", slug)}") {
    title
  }
}`);

if (entries.length === 0) {
  return new Response(null, { status: 404 });
}

const entry = entries[0];
---

{entry.title}