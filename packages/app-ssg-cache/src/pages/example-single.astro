---
/**
 * Page for Craft's "Example Single" section
 */

import cachedData from '@cache/sections__exampleSingle/data.json';
import config from '@config/sections/homepage';
import fetchAPI from '@lib/craft-cms/fetch-api';

const { query, querySchema } = config;

const data = import.meta.env.PROD
  ? cachedData
  : await fetchAPI({
      query,
      schema: querySchema,
    });

if (data?.entries === undefined || data.entries.length === 0) {
  return new Response(null, { status: 404 });
}

const entry = data.entries[0];
---

{entry.title}
